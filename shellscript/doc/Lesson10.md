# Lesson10

## サンプルプログラム

OSが異なるシステム間の転送があるとき、文字コードが異なるときがある。
そのときには`tr`コマンドを使用する「`prg1001.sh`」

オプションに`-d`をつければ削除になる「`prg1002.sh`」

### 日付・時刻の出力

`date`コマンドで日付・時刻の出力がなされるが、出力の書式も設定できる

|年４ケタ|月|日|時|分|秒|曜日の短縮形|
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|`%Y`|`%m`|`%d`|`%H`|`%M`|`%S`|`%a`|

「`prg1003.sh`」

区切る方法には`cut`コマンドもあり、読み込んだデータの中の一部のフィールドを取り出すときに有効

```shellscript
cut -d 区切り文字 -f フィールド番号
```

「`prg1004.sh`」

### 重複行を処理する

`uniq`コマンドを用いることで重複行に関する処理が可能。

- `-d`オプションで重複のある行のみ各一回出力
- `-u`オプションは重複のない行だけ出力する

`uniq`コマンドはあらかじめ並び変えてあることを前提とするコマンドなので`sort`コマンドを使用してた後に使用することが確実
「`prg1005.sh`」

|オプション   |意味|
|    :--:   |:-- |
|    `-c`   |行数をカウント|
|    `-i`   |大文字小文字を無視|
|   `-f m`  |最初のm個のフィールドを無視して比較|
|   `-s n`  |最初のn文字を無視して比較|

### 連結

文字列の連結は単に文字列を並べればよい「`prg1006.sh`」

ファイルの連結は`cat`コマンドで実行できるが、シェルスクリプトで実行する「`prg1007.sh`」

### 数値計算・比較

基本のプログラムと同じで四則演算と剰余演算が可能
ただし、積はshellscriptでは特殊であるから引用符またはバックスラッシュすること。
しかし、`expr`を使う文法は古いため、`$(( ))`を用いて表す。
このときは気にしなくてよい
「`prg1008.sh`」

```shellscript
expr $1 + $2
```

比較は以下のようにできる
|演算子|意味|例|
|:--:|:--|:--:|
|`-gt`|左は右より大きい|`a -gt b`|
|`-ge`|左は右以上     |`a -ge b`|
|`-lt`|左は右未満     |`a -lt b`|
|`-le`|左は右以下     |`a -le b`|
|`-eq`|等しい        |`a -eq b`|
|`-ne`|等しくない     |`a -ne b`|

「`prg1009.sh`」
